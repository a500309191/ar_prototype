<!DOCTYPE html>
<html>

<head>
<title>Page Title</title>
</head>



<script async src="https://unpkg.com/es-module-shims@1.8.0/dist/es-module-shims.js"></script>
<script type="importmap">
  {
    "imports": {
      "three": "https://unpkg.com/three@0.156.1/build/three.module.js",
      "three/addons/": "https://unpkg.com/three@0.156.1/examples/jsm/"
    }
  }
</script>
<script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.1.1/model-viewer.min.js"></script>




<style>
  div * {
    font-family: Arial;
    user-select: none;
  }
  body {
    margin: 0;
    padding: 0;
  }
  model-viewer {
    background: linear-gradient(0deg, rgb(41, 41, 41) 26%, rgb(70, 70, 70) 100%);
    width: 100vw;
    height: 94vh;
  }
</style>


<body>

  <model-viewer
    id="david"
    ar
    scale="0.0005 0.0005 0.0005"
    camera-controls
    touch-action="pan-y"
    src="https://864427.selcdn.ru/e1c138bd4faf090bce/ar/room.glb"
    alt="A 3D model of an David"
  >

  </model-viewer>

  <script type="module" crossorigin="anonymous">
    import * as THREE from 'three'

    const modelViewerParameters = document.querySelector("model-viewer#david")

    modelViewerParameters.addEventListener("load", e => {
      let scene = modelViewerParameters[Object.getOwnPropertySymbols(modelViewerParameters).find(e => e.description === 'scene')]
      let modelArray = scene.children[0].children[0].children[0].children

      let outside = modelArray[0]
      let interrior_1 = modelArray[1]
      let interrior_2 = modelArray[2]
      let portal_1 = modelArray[3]
      let portal_2 = modelArray[4]
      let venus = modelArray[5]
      let david = modelArray[6]

      outside.material.colorWrite = false
      outside.material.side = 2
      outside.renderOrder = 1

    })



    // const test = new THREE.MeshPhysicalMaterial()
    // test.metalness = 0.8
    // test.roughness = 0
    // test.reflectivity = 1

    // modelViewerParameters.addEventListener("load", e => {
    //   console.log(e)
    //   console.log(modelViewerParameters.model)

    //   let materials = modelViewerParameters.model.materials

    //   console.log(materials)
    //   console.log("0", materials[0].name)
    //   console.log("1", materials[1].name)
    //   console.log("2", materials[2].name)
    //   console.log("3", materials[3].name)
    //   console.log("4", materials[4].name)

    //   let outside = materials[0]
    //   let interrior_1 = materials[1]
    //   let interrior_2 = materials[2]
    //   let portal_1 = materials[3]
    //   let portal_2 = materials[4]


    //   outside.setAlphaCutoff(1)
    //   // outside.setAlphaMode("BLEND")
    //   outside.setAlphaMode("OPAQUE")
    //   // outside.setAlphaMode("MASK")
    //   // outside.setDoubleSided(false)
    //   outside.pbrMetallicRoughness.setBaseColorFactor([1, 0, 0, 0])

    //   interrior_1.setAlphaCutoff(0)
    //   interrior_1.setAlphaMode("BLEND")
    //   // // interrior_1.setDoubleSided(false)
    //   interrior_1.pbrMetallicRoughness.setBaseColorFactor([0, 0, 0.5, 1])

    //   // // interrior_2.setAlphaCutoff(0)
    //   // // interrior_2.setAlphaMode("BLEND")
    //   // interrior_2.setDoubleSided(false)

    // })


  </script>

</body>

</html>