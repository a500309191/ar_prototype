<!DOCTYPE html>
<html>

  <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>

  <body style="margin: 0px; overflow: hidden;">

    <script>
      // AFRAME.registerComponent("test", {
      //   init: function() {
      //     let self = this
      //     console.log("SELF: ", self)
      //   }
      // })

      AFRAME.registerComponent("model", {
        init: function() {
          let el = this.el
          console.log("EL: ", el)

          el.addEventListener("model-loaded", e => {
            console.log("MODEL LOADED: ", e)

            let model = el.getObject3D("mesh")
            console.log("3D: ", model)

            const material = new THREE.MeshPhysicalMaterial({})
            material.metalness = 0.8
            material.roughness = 0.1
            material.reflectivity = 0.8
            material.color = new THREE.Color("#747472")
            // material.emissive.setRGB(0.1, 0.1, 0.1)

            model.children[0].material = material
            console.log(material)

          })
        }
      })
    </script>

    <a-scene test embedded arjs >
      <a-marker
        type="pattern"
        url="https://864427.selcdn.ru/e1c138bd4faf090bce/ar/pattern-venus-marker.patt"
      > 

        <a-light
          intensity="4"
          color="#FFFFFF"
          light="castShadow:true; type:directional"
          position="0 5 5"
        ></a-light>

        <a-light
          intensity="1"
          color="#FFFFFF"
          light="type:ambient"
        ></a-light>

        <a-entity
          model
          position="0 0 0"
          animation="property: rotation; to: 0 360 0; loop: true; dur: 10000"
          scale="0.0005 0.0005 0.0005"
    
          obj-model="
            obj: url(https://864427.selcdn.ru/e1c138bd4faf090bce/ar/venus.obj);
            mtl: url(https://864427.selcdn.ru/e1c138bd4faf090bce/ar/venus.mtl);
          "
        ></a-entity>

        <a-text
          position="0 2 0.5"
          align="center"
          anchor="center"
          width="5"
          value="Venus">
        </a-text>

      </a-marker>
      <a-entity camera></a-entity>
    </a-scene>

  </body>
  
</html>